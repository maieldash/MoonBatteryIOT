Started GET "/" for 127.0.0.1 at 2024-10-15 15:34:05 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/mai/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/railties-7.2.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/mai/.rbenv/versions/3.2.3/lib/ruby/gems/3.2.0/gems/railties-7.2.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.3ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 3.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.6ms)


Started POST "/moon_batteries/register" for 127.0.0.1 at 2024-10-15 15:34:30 +0300
Processing by MoonBatteriesController#register as */*
  Parameters: {"moon_battery"=>{"mac_address"=>"01-B0-D0-63-C2-22"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/moon_batteries_controller.rb:5:in `register'
  [1m[36mMoonBattery Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM `moon_batteries` WHERE `moon_batteries`.`mac_address` = '01-B0-D0-63-C2-22' LIMIT 1[0m
  â†³ app/controllers/moon_batteries_controller.rb:5:in `register'
  [1m[36mMoonBattery Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `moon_batteries` WHERE `moon_batteries`.`serial_number` = '8114CF' LIMIT 1[0m
  â†³ app/controllers/moon_batteries_controller.rb:5:in `register'
  [1m[36mMoonBattery Create (0.9ms)[0m  [1m[32mINSERT INTO `moon_batteries` (`mac_address`, `serial_number`, `last_ping`, `charge_level`, `connected_lunar_cell_id`, `created_at`, `updated_at`) VALUES ('01-B0-D0-63-C2-22', '8114CF', NULL, 0, NULL, '2024-10-15 12:34:30.208981', '2024-10-15 12:34:30.208981')[0m
  â†³ app/controllers/moon_batteries_controller.rb:5:in `register'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/moon_batteries_controller.rb:5:in `register'
Completed 201 Created in 29ms (Views: 0.1ms | ActiveRecord: 16.6ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/login" for 127.0.0.1 at 2024-10-15 15:34:39 +0300
Processing by AuthController#login as */*
  Parameters: {"moon_battery"=>{"mac_address"=>"01-B0-D0-63-C2-22"}, "auth"=>{"moon_battery"=>{"mac_address"=>"01-B0-D0-63-C2-22"}}}
  [1m[36mMoonBattery Load (0.4ms)[0m  [1m[34mSELECT `moon_batteries`.* FROM `moon_batteries` WHERE `moon_batteries`.`mac_address` = '01-B0-D0-63-C2-22' LIMIT 1[0m
  â†³ app/controllers/auth_controller.rb:3:in `login'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/moon_batteries/ping" for 127.0.0.1 at 2024-10-15 15:34:52 +0300
Processing by MoonBatteriesController#ping as */*
  Parameters: {"moon_battery"=>{"mac_address"=>"00-B0-D0-63-C2-22"}}
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/moon_batteries/ping" for 127.0.0.1 at 2024-10-15 15:35:01 +0300
Processing by MoonBatteriesController#ping as */*
  Parameters: {"moon_battery"=>{"mac_address"=>"01-B0-D0-63-C2-22"}}
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/moon_batteries/ping" for 127.0.0.1 at 2024-10-15 15:35:20 +0300
Processing by MoonBatteriesController#ping as */*
  Parameters: {"moon_battery"=>{"mac_address"=>"01-B0-D0-63-C2-22"}}
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/moon_batteries/ping" for 127.0.0.1 at 2024-10-15 15:35:44 +0300
Processing by MoonBatteriesController#ping as */*
  Parameters: {"moon_battery"=>{"mac_address"=>"01-B0-D0-63-C2-22"}}
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/moon_batteries/ping" for 127.0.0.1 at 2024-10-15 15:36:16 +0300
Processing by MoonBatteriesController#ping as */*
  Parameters: {"moon_battery"=>{"mac_address"=>"01-B0-D0-63-C2-22"}}
Filter chain halted as :authorize_request rendered or redirected
Completed 401 Unauthorized in 580157ms (Views: 0.4ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/login" for 127.0.0.1 at 2024-10-15 15:46:11 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by AuthController#login as */*
  Parameters: {"moon_battery"=>{"mac_address"=>"01-B0-D0-63-C2-22"}, "auth"=>{"moon_battery"=>{"mac_address"=>"01-B0-D0-63-C2-22"}}}
  [1m[36mMoonBattery Load (1.0ms)[0m  [1m[34mSELECT `moon_batteries`.* FROM `moon_batteries` WHERE `moon_batteries`.`mac_address` = '01-B0-D0-63-C2-22' LIMIT 1[0m
  â†³ app/controllers/auth_controller.rb:3:in `login'
Completed 200 OK in 8018ms (Views: 0.4ms | ActiveRecord: 11.4ms (1 query, 0 cached) | GC: 27.7ms)


Started POST "/moon_batteries/ping" for 127.0.0.1 at 2024-10-15 15:46:45 +0300
Processing by MoonBatteriesController#ping as */*
  Parameters: {"moon_battery"=>{"mac_address"=>"01-B0-D0-63-C2-22"}}
  [1m[36mMoonBattery Load (1.1ms)[0m  [1m[34mSELECT `moon_batteries`.* FROM `moon_batteries` WHERE `moon_batteries`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/application_controller.rb:6:in `authorize_request'
  [1m[36mMoonBattery Load (1.1ms)[0m  [1m[34mSELECT `moon_batteries`.* FROM `moon_batteries` WHERE `moon_batteries`.`mac_address` = '01-B0-D0-63-C2-22' LIMIT 1[0m
  â†³ app/controllers/moon_batteries_controller.rb:47:in `find_moon_battery'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/moon_battery.rb:12:in `ping!'
  [1m[36mMoonBattery Update (0.4ms)[0m  [1m[33mUPDATE `moon_batteries` SET `moon_batteries`.`last_ping` = '2024-10-15 12:46:58.346693', `moon_batteries`.`updated_at` = '2024-10-15 12:46:58.352981' WHERE `moon_batteries`.`id` = 3[0m
  â†³ app/models/moon_battery.rb:12:in `ping!'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/moon_battery.rb:12:in `ping!'
Completed 200 OK in 12948ms (Views: 0.2ms | ActiveRecord: 8.4ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/moon_batteries/configure" for 127.0.0.1 at 2024-10-15 15:47:23 +0300
Processing by MoonBatteriesController#configure as */*
  Parameters: {"moon_battery"=>{"mac_address"=>"00-B0-D0-63-C2-22", "configurations"=>[{"temperature"=>"30"}, {"mode"=>"eco"}]}}
  [1m[36mMoonBattery Load (0.6ms)[0m  [1m[34mSELECT `moon_batteries`.* FROM `moon_batteries` WHERE `moon_batteries`.`id` = 3 LIMIT 1[0m
  â†³ app/controllers/application_controller.rb:6:in `authorize_request'
  [1m[36mMoonBattery Load (0.6ms)[0m  [1m[34mSELECT `moon_batteries`.* FROM `moon_batteries` WHERE `moon_batteries`.`mac_address` = '00-B0-D0-63-C2-22' LIMIT 1[0m
  â†³ app/controllers/moon_batteries_controller.rb:47:in `find_moon_battery'
  [1m[36mConfiguration Load (0.8ms)[0m  [1m[34mSELECT `configurations`.* FROM `configurations` WHERE `configurations`.`moon_battery_id` = 2 AND `configurations`.`key` = 'temperature' LIMIT 1[0m
  â†³ app/controllers/moon_batteries_controller.rb:29:in `block (2 levels) in configure'
  [1m[36mConfiguration Load (0.3ms)[0m  [1m[34mSELECT `configurations`.* FROM `configurations` WHERE `configurations`.`moon_battery_id` = 2 AND `configurations`.`key` = 'mode' LIMIT 1[0m
  â†³ app/controllers/moon_batteries_controller.rb:29:in `block (2 levels) in configure'
Completed 200 OK in 8331ms (Views: 0.1ms | ActiveRecord: 5.9ms (4 queries, 0 cached) | GC: 5.3ms)


